# OpenHands Agent Guide

## 0. 最優先ルール

不明点・前提不足・設計の曖昧さがある場合は、修正を始める前に必ず質問すること。
勝手な推測で実装しない。

## ログ調査（Cloud Run）

- GitHub Actions が Cloud Run ログを取得して `openhands_context/cloudrun_logs.txt` と
  `openhands_context/cloudrun_logs.json` に保存する。
- 該当ファイルが見当たらない場合は未生成と判断しcloud run ログによる調査はスキップする。
- バグ修正/原因調査の依頼では、まずこのログを読み、根拠となる行（例外文言やスタック）を引用して原因仮説を述べること。
- ログだけで特定できない場合は、実装に着手する前に追加質問を返すこと（例：再現条件、該当リクエスト、直前のデプロイ等）。

## 時刻指定の解釈

- コメントに書かれた日本時間（JST）の時刻を優先する。
- 指定時刻の前後±10分のログを優先して確認する（取得範囲がそうなっている想定）。

### 追加質問が必要な例

- 期待する挙動（入力/出力/例外/境界）が書かれていない
- 仕様が複数解釈できる
- 既存仕様への互換性要件が不明
- テスト方針が不明（追加するのか、既存に合わせるのか）

### 質問の形式

PR を作らずに、Issue/PRコメントで箇条書き質問を返す。
質問は最大5つまで。Yes/No で答えられる形を優先。

## 1. 環境変数の扱い（重要）

- `.env` は変更しない（追加・編集・新規作成を禁止）
- 環境変数の追加が必要な場合は `.env.example` に「仮の値」だけを追記する
- 既存の `.env.example` が無ければ作成してよい（ただし仮値のみ）

### `.env.example` の記載ルール

- 値はダミー（例: `YOUR_API_KEY_HERE`）
- 既存形式に合わせる
- 追加したキーは README または該当ドキュメントにも追記（ある場合）

## 2. 実行・検証

- 可能な限りテストを実行してからPRを作成する
- テストが無い場合は、動作確認手順をPR本文に書く

## 3. 変更方針

- 目的: 最小差分で直す
- 既存スタイルに合わせる
- 1PR = 1目的
